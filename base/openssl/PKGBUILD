#!/bin/bash

pkgname=openssl
pkgver=1.1.1d
archive=$pkgname-$pkgver.tar.gz
sum=056057782325134b76d1931c48f2c7e6595d7ef4

dstdir=$mkToolchainBase

build() {
  download https://www.openssl.org/source/$archive
  check $archive $sum
  extract $archive

  pushd $pkgname-$pkgver
    message "Configuring $pkgname"
    KERNEL_BITS=64 \
    ./Configure --prefix="$dstdir" --openssldir="$dstdir"/etc/ssl --libdir=lib \
    shared zlib-dynamic $OS-$ARCH
    message "Compiling $pkgname"
    make
  popd
}

package() {
  make -C $pkgname-$pkgver MANDIR="$dstdir"/share/man MANSUFFIX=ssl install
}
